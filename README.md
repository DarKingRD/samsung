# Умный корректор текста (аналог Grammarly)

Проект: веб-приложение для исправления ошибок в тексте с подсветкой ошибок и несколькими вариантами исправления.

Обучение и эксперименты проводились на Kaggle: https://www.kaggle.com/code/darkingrd/rut5-base-train

## Возможности

- Исправление текста и выдача нескольких вариантов (top-n).
- Подсветка ошибок (возвращается HTML для отображения на фронтенде).
- Типы ошибок: `punctuation`, `grammar`, `spelling`, `semantics`.
- Веб-интерфейс (Flask + JS).

## Структура проекта

```
├── data
│   ├── processed               # Обработанные датасеты
│       └── ...               
│   └── raw                     # Необработанные датасеты
│       └── ... 
├── models
│   └── ...                     # Здесь должна располагаться модель
│
├── src/
│   ├── app.py                  # Flask приложение + API + Swagger (Flasgger)
│   ├── inference.py            # Инференс модели и логика исправлений/подсветки
│   └── data_processing.py      # Подготовка/обработка данных (скрипты)
├── web/
│   ├── openapi.yaml            # OpenAPI спецификация для Swagger UI
│   ├── templates/
│   │   └── index.html          # Главная страница
│   └── static/
│       ├── css/main.css        # Стили
│       └── js/main.js          # Логика фронтенда (fetch к API)
└── README.md
```

## Установка

1) Создать окружение и поставить зависимости:

```bash
pip install -r requirements.txt
```

(Если `requirements.txt` у тебя пока не актуализирован — можно просто зафиксировать зависимости после установки через `pip freeze > requirements.txt`.)

2) (Опционально) подготовить папку с моделью:

- По умолчанию приложение ищет модель в `./models/correction_model_v2`.
- Если папки нет — будет использована базовая `t5-small`.

## Запуск

Запуск веб-приложения:

```bash
python src/app.py
```

После запуска:

- Веб-интерфейс: `http://localhost:5000/`
- Swagger UI: `http://localhost:5000/apidocs/` (через Flasgger)
- Спецификация подтягивается из `web/openapi.yaml`.

## API

### POST /api/correct

Исправляет текст и возвращает несколько вариантов.

Пример запроса:

```json
{ "text": "Я хочю ета зделать." }
```

### POST /api/highlight

Возвращает HTML с подсветкой ошибок и количество ошибок для выбранного варианта (`variant_index`).

Пример запроса:

```json
{ "text": "Я хочю ета зделать.", "variant_index": 0 }
```

### GET /api/stats

Простой endpoint для проверки статуса приложения (загружена ли модель и версия).

## Датасеты

Используемые источники данных (кратко):

- GitHub Typo Corpus.
- Kartaslov.

## Notes / ограничения

- `position` в списке `corrections` — позиция в исходной строке (индекс символа), вычисляется эвристически при сравнении токенов/слов.
- Подсветка в `highlight_errors()` сейчас возвращает HTML-строку, но фактически в неё не добавлены теги обёртки (можно расширить, чтобы подсвечивать span’ами с классами).
